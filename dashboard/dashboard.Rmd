---
title: "Brazilian Risk Parity"
output: 
    flexdashboard::flex_dashboard:
        social: menu
        orientation: rows
        vertical_layout: scroll
params:
    analysis: NULL
---

```{r setup, include = FALSE}
library(tidyverse)
library(targets)

percentage_columns <- function(
    data,
    accuracy = 0.1
) {
    data %>% 
        mutate(across(where(is.numeric), scales::percent, accuracy = accuracy)) %>%
        return()
}

analysis <-
    params %>% 
    magrittr::extract2("analysis") %>% 
    magrittr::extract2(1)

contains_portfolio <-
    analysis %>% 
    magrittr::extract2("contains_portfolio")
```

```{r, child = "base-analysis.Rmd"}
```

```{r, child = "portfolio-complement.Rmd", eval = contains_portfolio}
```
